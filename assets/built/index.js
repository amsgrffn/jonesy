!function(e,t){e&&!e.getElementById("livereloadscript")&&((t=e.createElement("script")).async=1,t.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t))}(self.document),function(){"use strict";const e={getKey:e=>`rateLimit_${e}_${Math.floor(Date.now()/1e3/60)}`,increment(e,t){const n=this.getKey(e);let o=parseInt(sessionStorage.getItem(n)||"0");return o++,sessionStorage.setItem(n,o.toString()),o<=t},checkLimit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return this.cleanup(),this.increment(e,t)},cleanup(){const e=Math.floor(Date.now()/1e3/60);for(let t=0;t<sessionStorage.length;t++){const n=sessionStorage.key(t);if(n&&n.startsWith("rateLimit_")){e-parseInt(n.split("_")[2])>5&&sessionStorage.removeItem(n)}}}},t={urlPatterns:{dangerous:/javascript:|data:|vbscript:|file:|blob:|ftp:|ws:|wss:/i,symbols:/[<>'"`{}()\[\]]/},inputPatterns:{text:/^[a-zA-Z0-9\s\-_.,!?]*$/,email:/^[^@\s]+@[^@\s]+\.[^@\s]+$/,numeric:/^\d+$/}},n={TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",HOME:"Home",END:"End",J:"j",K:"k",N:"n",P:"p"},o={EXPANDED:"aria-expanded",HIDDEN:"aria-hidden",CONTROLS:"aria-controls",CHECKED:"aria-checked",SELECTED:"aria-selected",LABEL:"aria-label",LABELLEDBY:"aria-labelledby",LISTBOX:"listbox",OPTION:"option"},r="article",i=".article-content",a="footer",s="sidenotes-wrapper",l=1040,c="mobile-sidenotes",d={containerId:"post-type-filter",types:[{id:"all",label:"All Posts"},{id:"article",label:"Articles"},{id:"bookmarks",label:"Bookmarks"},{id:"notes",label:"Notes"},{id:"quotes",label:"Quotes"}]},u={triggerButtonClass:"related-trigger",panelClass:"related-panel",overlayClass:"panel-overlay",closeBtnClass:"close-panel",activeClass:"active",panelOpenClass:"panel-open",maxOpenAttempts:10,timeWindowMs:6e4,focusableSelectors:["button:not([disabled])",'[href]:not([href*="javascript:"])',"input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",")},h={updateInterval:7e3,fadeTransitionMs:500,testimonials:[{quote:"Newsletters suck. This one sucks the most.",author:"John Bender",avatar:"media/avatars/bender.webp",link:"https://thebreakfastclub.fandom.com/wiki/John_Bender"},{quote:"I ain't got time to read this crap",author:"Blain Cooper",avatar:"media/avatars/blain.webp",link:"https://avp.fandom.com/wiki/Blain_Cooper"},{quote:"My life's been one long, glorious ‘sitting on beach earning twenty percent' vibe-fest since becoming a member of You Can't Be Serious.",author:"Hans Gruber",avatar:"media/avatars/hans.webp",link:"https://en.wikipedia.org/wiki/Hans_Gruber"},{quote:"I pity the fool who don't support You Can't Be Serious.",author:"Clubber Lang",avatar:"media/avatars/clubber.webp",link:"https://en.wikipedia.org/wiki/Clubber_Lang"},{quote:"This site was, is, and will always be nada",author:"Steff McKee",avatar:"media/avatars/steff.webp",link:"https://en.wikipedia.org/wiki/Pretty_in_Pink"},{quote:"You're God Damn right I read You Can't Be Serious.",author:"Colonel Nathan R. Jessup",avatar:"media/avatars/jessup.webp",link:"https://villains.fandom.com/wiki/Colonel_Nathan_R._Jessup"},{quote:"These people are a stain on the internet. It's best to go about your daily routine and forget they exist.",author:"Mildred Ratched",avatar:"media/avatars/mildred.webp",link:"https://en.wikipedia.org/wiki/Nurse_Ratched"},{quote:"So this newsletter right. It’s 90% bullshit, but it’s entertaining. That’s why I read it because it entertains me.",author:"Alonzo Harris",avatar:"media/avatars/alonzo.webp",link:"https://villains.fandom.com/wiki/Alonzo_Harris"},{quote:"All I need are some tasty waves, a cool buzz, You Can't Be Serious, and I'm fine.",author:"Jeff Spicoli",avatar:"media/avatars/spicoli.webp",link:"https://www.theringer.com/2020/08/26/movies/spicoli-fast-times-ridgemont-high-teen-movie"},{quote:"Listen, I don't bother nobody and nobody bothers me but these brothers are pretty cool. They see ‘em you know.",author:"Frank",avatar:"media/avatars/frank.webp",link:"https://en.wikipedia.org/wiki/They_Live"},{quote:"You Can't Be Serious? Those dudes talk shit, saying they'll make it rain good times and all that. The only rain you'll be catching from them is a light drizzle of dickwater.",author:"Reggie Hammond",avatar:"media/avatars/reggie.webp",link:"https://www.cracked.com/article_36231_48-hrs-at-40-how-eddie-murphys-first-movie-birthed-the-buddy-cop-comedy.html"},{quote:"My God, it's full of bullshit.",author:"David Bowman",avatar:"media/avatars/bowman.webp",link:"https://2001.fandom.com/wiki/David_Bowman"},{quote:"I'd rather have my eyelids stapled shut than read this trash.",author:"Regina George",avatar:"media/avatars/regina.webp",link:"https://en.wikipedia.org/wiki/Regina_George_(Mean_Girls)"},{quote:"Hey man, I don't wanna rain on their parade, but these guys won't last seventeen days. Easy. Game over for them man.",author:"Private First Class William L. Hudson",avatar:"media/avatars/hudson.webp",link:"https://en.wikipedia.org/wiki/Hudson_%28Aliens%29"},{quote:"This quitting thing, it's a hard habit to break once you start, but one thing I'll never quit is this website.",author:"Morris Buttermaker",avatar:"media/avatars/buttermaker.webp",link:"https://en.wikipedia.org/wiki/The_Bad_News_Bears"},{quote:"Blogs are teeming petri dishes of malignant mediocrity. Written by mental maggots consuming their own predigested pablum. You Can't Be Serious is the excretion.",author:"Lydia Tár",avatar:"media/avatars/tar.webp",link:"https://en.wikipedia.org/wiki/T%C3%A1r"}]},m={sunny:'\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="weather-icon inline-icon" fill="none" stroke="currentColor">\n            <path d="M12 17a5 5 0 100-10 5 5 0 000 10zM12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"\n                  stroke-width="2" stroke-linecap="round"/>\n        </svg>',cloudy:'\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="weather-icon inline-icon" fill="none" stroke="currentColor">\n            <path d="M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z"\n                  stroke-width="2" stroke-linecap="round"/>\n        </svg>',"partly cloudy":'\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="weather-icon inline-icon" fill="none" stroke="currentColor">\n            <path d="M12 4a4 4 0 100 8 4 4 0 000-8zM18 10h-1.26A4 4 0 109 20h9a5 5 0 000-10z"\n                  stroke-width="2" stroke-linecap="round"/>\n        </svg>',rainy:'\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="weather-icon inline-icon" fill="none" stroke="currentColor">\n            <path d="M20 16.58A5 5 0 0018 7h-1.26A8 8 0 104 15.25M8 13v8M16 13v8M12 15v8"\n                  stroke-width="2" stroke-linecap="round"/>\n        </svg>',drizzle:'\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="weather-icon inline-icon" fill="none" stroke="currentColor">\n            <path d="M20 16.58A5 5 0 0018 7h-1.26A8 8 0 104 15.25M8 13v8M16 13v8M12 15v8"\n                  stroke-width="2" stroke-linecap="round"/>\n        </svg>',snow:'\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="weather-icon inline-icon" fill="none" stroke="currentColor">\n            <path d="M20 17.58A5 5 0 0018 8h-1.26A8 8 0 104 16.25M8 16h.01M8 20h.01M12 18h.01M12 22h.01M16 16h.01M16 20h.01"\n                  stroke-width="2" stroke-linecap="round"/>\n        </svg>',foggy:'\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="weather-icon inline-icon" fill="none" stroke="currentColor">\n            <path d="M3 8h18M3 12h18M3 16h18"\n                  stroke-width="2" stroke-linecap="round"/>\n        </svg>'};function p(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML.replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/on\w+="[^"]*"/g,"").replace(/href="javascript:[^"]*"/g,"").replace(/javascript:/gi,"").replace(/data:/gi,"").replace(/vbscript:/gi,"")}function f(e){try{const t=new URL(e),n=decodeURIComponent(e),o=[".html",".htm",".php",".asp",".aspx",".jsp",".json"].some((e=>t.pathname.toLowerCase().endsWith(e)));return t.origin===window.location.origin&&t.protocol===window.location.protocol&&!t.username&&!t.password&&!/[<>'"`{}()\[\]]/.test(n)&&!/javascript:|data:|vbscript:|file:|blob:|ftp:|ws:|wss:/i.test(n)&&o}catch{return!1}}function g(e,t){let n,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];const s=o&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,o||e.apply(this,i)}),t),s&&e.apply(this,i)}}function v(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;if(!e)return"";const o=document.createElement("div");return o.textContent=e,o.textContent.slice(0,n).replace(t.urlPatterns.dangerous,"").replace(t.urlPatterns.symbols,"")}function y(e){const t=document.querySelector(".article-list");if(!t)return;const r=function(){const e={all:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layout-grid"><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></svg>',article:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/><path d="M18 14h-8"/><path d="M15 18h-5"/><path d="M10 6h8v4h-8V6Z"/></svg>',bookmarks:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bookmark"><path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"/></svg>',notes:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sticky-note"><path d="M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z"/><path d="M15 3v4a2 2 0 0 0 2 2h4"/></svg>',quotes:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-quote"><path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/><path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/></svg>'},t=document.createElement("div");t.id=d.containerId,t.className="post-type-filter";const n=document.createElement("button");n.className="filter-button",n.setAttribute("aria-expanded","false"),n.setAttribute("aria-haspopup","listbox");const o=document.createElement("span");o.className="filter-static-text",o.textContent="Filter Articles By: ";const r=document.createElement("span");r.className="filter-button-text",r.textContent="All Posts";const i=document.createElement("span");i.className="filter-button-icon",i.innerHTML='\n        <svg width="12" height="12" viewBox="0 0 12 12">\n            <path d="M2 4l4 4 4-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n        </svg>\n    ',n.appendChild(o),n.appendChild(r),n.appendChild(i);const a=document.createElement("div");a.className="filter-dropdown",a.setAttribute("role","listbox"),a.setAttribute("aria-hidden","true"),a.style.display="none";const s=document.createElement("ul");return d.types.forEach((t=>{const n=document.createElement("li");n.setAttribute("role","option"),n.setAttribute("data-value",t.id),n.setAttribute("tabindex","-1");const o=document.createElement("span");o.className="filter-option-icon",o.innerHTML=e[t.id]||e.all;const r=document.createElement("span");r.className="filter-option-text",r.textContent=t.label,n.appendChild(o),n.appendChild(r),"all"===t.id&&n.setAttribute("aria-selected","true"),s.appendChild(n)})),a.appendChild(s),t.appendChild(n),t.appendChild(a),t}();Object.assign(r.style,{opacity:"0",visibility:"hidden",transition:"opacity 0.3s ease-out",height:"100%"});const i=document.querySelector(".header-dropdown");function a(){const e=t.getBoundingClientRect().top+window.scrollY-200;window.scrollY>e?(r.style.visibility="visible",requestAnimationFrame((()=>{r.style.opacity="1"}))):(r.style.opacity="0",setTimeout((()=>{"0"===r.style.opacity&&(r.style.visibility="hidden")}),300))}i&&i.after(r),window.addEventListener("scroll",g(a,10)),window.addEventListener("resize",g(a,100)),a();const s=r.querySelector(".filter-button"),l=r.querySelector(".filter-dropdown"),c=r.querySelectorAll("li"),u=r.querySelector(".filter-button-text"),h=()=>{const e=s.getBoundingClientRect();l.style.position="fixed",l.style.top=`${e.bottom+8}px`,l.style.left=`${e.left}px`,l.style.width=`${Math.max(e.width,200)}px`},m=e=>{e?(l.style.display="block",h()):l.style.display="none",s.setAttribute(o.EXPANDED,e.toString()),l.setAttribute(o.HIDDEN,(!e).toString())},p=t=>{c.forEach((e=>{e.setAttribute("aria-selected",e.dataset.value===t)}));const n=d.types.find((e=>e.id===t));u.textContent=n.label,s.classList.toggle("filter-active","all"!==t);const o=document.createElement("div");o.setAttribute("role","status"),o.className="visually-hidden",o.textContent=`Showing ${n.label}`,document.body.appendChild(o),setTimeout((()=>o.remove()),1e3),m(!1),localStorage.setItem("selectedPostType",t),e&&("all"===t?e.arrange({filter:"*"}):e.arrange({filter:`.${t}`}))};s.addEventListener("click",(()=>{const e="true"===s.getAttribute(o.EXPANDED);m(!e)})),c.forEach((e=>{e.addEventListener("click",(()=>{p(e.dataset.value)}))})),document.addEventListener("click",(e=>{r.contains(e.target)||m(!1)})),r.addEventListener("keydown",(e=>{const t="true"===s.getAttribute(o.EXPANDED);switch(e.key){case n.ESCAPE:t&&(m(!1),s.focus());break;case n.ENTER:case n.SPACE:"LI"===e.target.tagName&&p(e.target.dataset.value);break;case n.UP:case n.DOWN:if(t){e.preventDefault();const t=document.activeElement,o=Array.from(c),r=o.indexOf(t);let i;i=e.key===n.UP?r>0?r-1:o.length-1:r<o.length-1?r+1:0,o[i].focus()}}})),window.addEventListener("scroll",(()=>{"true"===s.getAttribute(o.EXPANDED)&&h()}),{passive:!0}),window.addEventListener("resize",g((()=>{"true"===s.getAttribute(o.EXPANDED)&&h()}),100));const f=localStorage.getItem("selectedPostType");return f&&p(f),p}function w(){const e=document.getElementById("testimonal");if(!e)return;let t=Array.from({length:h.testimonials.length},((e,t)=>t)),n=0;function o(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function r(){if(!e)return;const r=e.querySelector(".testimonial-content");r&&(r.style.opacity="0",r.style.transform="translate(-50%, -40%)",setTimeout((()=>{const r=h.testimonials[t[n]];console.log("Loading testimonial:",{author:r.author,avatarPath:`/assets/${r.avatar}`}),e.innerHTML=function(e){const t=p(e.quote),n=p(e.author),o=p(e.link),r=p(`/assets/${e.avatar}`);return`<div class="testimonial-content">\n            <q>${t.replaceAll("'","’")}</q>\n            <cite><img class="rounded-full inline mr-1"\n                 src="${r}"\n                 width="45"\n                 height="45"\n                 alt="${n}'s avatar"\n                 onerror="this.style.display='none'">\n                 <a href="${o}">${n}<svg xmlns="http://www.w3.org/2000/svg"\n                      width="16"\n                      height="16"\n                      viewBox="0 0 24 24"\n                      fill="none"\n                      stroke="currentColor"\n                      stroke-width="1.25"\n                      stroke-linecap="round"\n                      stroke-linejoin="round">\n                      <path d="M5 12h14"/>\n                      <path d="m12 5 7 7-7 7"/>\n                 </svg></a>\n            </cite>\n        </div>`}(r);const i=e.querySelector(".testimonial-content");i&&(i.style.opacity="1",i.style.transform="translate(-50%, -50%)"),n=(n+1)%t.length,0===n&&(t=o(t))}),h.fadeTransitionMs))}t=o(t),r(),setInterval(r,h.updateInterval)}function b(){const e=document.getElementById("current-temp"),t=document.getElementById("current-condition");if(!e||!t)return;const n={sunny:[0,1],"partly cloudy":[2],cloudy:[3],foggy:[45,48],drizzle:[51,53,55],rain:[61,63,65,80,81,82],snow:[71,73,75,77,85,86],thunderstorm:[95,96,99]};function o(e){for(const[t,o]of Object.entries(n))if(o.includes(e))return t;return"cloudy"}!async function(){try{window.weatherUpdateInterval&&clearInterval(window.weatherUpdateInterval);const n=async()=>{try{const n=await async function(){try{localStorage.removeItem("weather_cache");const e=43.66147,t=-70.25533,n=new URL("https://api.open-meteo.com/v1/forecast");n.searchParams.set("latitude",e),n.searchParams.set("longitude",t),n.searchParams.set("current","temperature_2m,weather_code"),n.searchParams.set("temperature_unit","fahrenheit"),n.searchParams.set("_cb",Math.random());const r=await fetch(n);if(!r.ok)throw new Error("Weather API request failed");const i=await r.json(),a={temp:Math.round(i.current.temperature_2m),condition:o(i.current.weather_code),lastUpdated:(new Date).toISOString()};return console.log("Weather update:",{temp:a.temp,condition:a.condition,lastUpdated:a.lastUpdated,localTime:(new Date).toLocaleString("en-US",{timeZone:"America/New_York"})}),localStorage.setItem("weather_cache",JSON.stringify(a)),{temp:a.temp,condition:a.condition}}catch(e){return console.error("Error fetching weather:",e),{temp:"--",condition:"cloudy"}}}();if(!e||!t)return void console.error("Weather elements not found");e.textContent=`${n.temp}°F`,t.textContent=` ${n.condition}`,function(t){const n=m[t]||m.cloudy,o=e.closest("li"),r=o.querySelector(".weather-icon");r&&r.parentElement.remove();const i=document.createElement("span");i.className="weather-icon-container",i.innerHTML=n,o.insertBefore(i,o.firstChild)}(n.condition),e.setAttribute("aria-label",`Current temperature is ${n.temp} degrees Fahrenheit and ${n.condition}`)}catch(e){console.error("Error updating weather display:",e)}};await n();const r=108e5;window.weatherUpdateInterval=setInterval(n,r),document.addEventListener("visibilitychange",(()=>{if(document.hidden&&window.weatherUpdateInterval)clearInterval(window.weatherUpdateInterval);else if(!document.hidden&&!window.weatherUpdateInterval){const e=localStorage.getItem("weather_cache");if(e){const t=JSON.parse(e);new Date(t.lastUpdated)<new Date(Date.now()-r)&&(n(),window.weatherUpdateInterval=setInterval(n,r))}else n(),window.weatherUpdateInterval=setInterval(n,r)}}))}catch(e){console.error("Error in weather update system:",e)}}()}function E(){const e=document.querySelector(".header-dropdown"),t=e.querySelector(".header-dropdown-button"),n=e.querySelector(".header-dropdown-content"),o=e.querySelector(".header-dropdown-overlay"),r=e.querySelector(".header-dropdown-backdrop");let i=!1,a=null;function s(){i=!1,e.classList.remove("active"),t.setAttribute("aria-expanded","false"),n.setAttribute("aria-hidden","true"),o.style.display="none",r.style.display="none"}function l(){i&&(a=setTimeout(s,100))}function c(){a&&(clearTimeout(a),a=null)}t.addEventListener("click",(a=>{a.stopPropagation(),i?s():(i=!0,e.classList.add("active"),t.setAttribute("aria-expanded","true"),n.setAttribute("aria-hidden","false"),o.style.display="block",r.style.display="block")})),[e,n].forEach((e=>{e.addEventListener("mouseleave",l),e.addEventListener("mouseenter",c)})),[o,r].forEach((e=>{e.addEventListener("click",s),e.addEventListener("mouseover",l)})),document.addEventListener("click",(t=>{i&&!e.contains(t.target)&&s()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&i&&s()}))}window.trustedTypes&&trustedTypes.createPolicy&&trustedTypes.createPolicy("default",{createHTML:e=>e,createScriptURL:e=>e,createScript:e=>e});class k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"carousel-container";this.container=document.getElementById(e),this.container&&(this.track=this.container.querySelector(".carousel-track"),this.track&&(this.scrollPosition=0,this.isHovered=!1,this.animationFrame=null,this.init()))}init(){this.setupCarousel(),this.addEventListeners(),setTimeout((()=>{this.track.classList.add("loaded"),this.startAnimation()}),100)}setupCarousel(){const e=Array.from(this.track.querySelectorAll(".article-card"));if(!e.length)return;this.track.style.willChange="transform",this.track.style.backfaceVisibility="hidden",this.track.style.transform="translate3d(0, 0, 0)";const t=e[0].offsetWidth,n=e.length*(t+24);for(let t=0;t<4;t++){e.map((e=>e.cloneNode(!0))).forEach((e=>this.track.appendChild(e)))}this.totalWidth=n,this.resetPoint=-3*n}startAnimation(){let e=performance.now();const t=n=>{const o=(n-e)/16;e=n;const r=this.isHovered?.5:1.3;this.scrollPosition-=r*o,this.scrollPosition<=this.resetPoint&&(this.scrollPosition+=this.totalWidth),this.track.style.transform=`translate3d(${this.scrollPosition}px, 0, 0)`,this.animationFrame=requestAnimationFrame(t)};t(performance.now())}addEventListeners(){this.track.addEventListener("mouseenter",(()=>{this.isHovered=!0})),this.track.addEventListener("mouseleave",(()=>{this.isHovered=!1})),"ontouchstart"in window&&(this.track.addEventListener("touchstart",(()=>{this.isHovered=!0})),this.track.addEventListener("touchend",(()=>{this.isHovered=!1}))),window.addEventListener("resize",(()=>{cancelAnimationFrame(this.animationFrame),this.setupCarousel(),this.startAnimation()})),document.addEventListener("visibilitychange",(()=>{document.hidden?cancelAnimationFrame(this.animationFrame):this.startAnimation()}))}}function A(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e.closest(".dropdown");if(!n)return;const o=n.getBoundingClientRect(),r=document.createElement("div");r.className="copy-alert",r.setAttribute("role","alert"),r.setAttribute("aria-live","polite"),Object.assign(r.style,{position:"fixed",left:`${o.left+o.width/2}px`,bottom:window.innerHeight-o.top+10+"px",backgroundColor:t?"#333":"#dc3545",color:"white",padding:"12px 24px",borderRadius:"4px",zIndex:"1000",fontSize:"14px",fontFamily:"var(--sans-serif)",opacity:"0",transition:"opacity 0.3s ease-in-out",whiteSpace:"nowrap",transform:"translateX(-50%)"}),r.textContent=t?"URL copied to clipboard":"Failed to copy URL",document.body.appendChild(r),requestAnimationFrame((()=>{r.style.opacity="1",setTimeout((()=>{r.style.opacity="0",setTimeout((()=>r.remove()),300)}),2e3)}))}document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.querySelector(".skip-link");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector("main");t&&(t.setAttribute("tabindex","-1"),t.focus(),t.scrollIntoView())}))}(),document.addEventListener("click",(t=>{if(!e.checkLimit("globalClicks",100,6e4))return void console.warn("Too many clicks detected");if(t.target.closest(".copy-url")&&(t.preventDefault(),async function(t){if(t.preventDefault(),!e.checkLimit("clipboardCopy",10))return void console.warn("Too many clipboard attempts");const n=t.target.closest("article");if(!n)return;const o=n.querySelector("h2 a"),r=o?o.href:window.location.href;try{await navigator.clipboard.writeText(r),A(t.target.closest(".copy-url"),!0)}catch(e){console.error("Failed to copy URL:",e),A(t.target,!1)}}(t)),t.target.closest(".email-share")&&(t.preventDefault(),function(t){if(t.preventDefault(),!e.checkLimit("emailShare",10))return void console.warn("Too many email share attempts");const n=t.target.closest("article");if(!n)return;const o=n.querySelector("h2 a"),r=o?o.href:window.location.href,i=v(o?o.textContent:document.title),a=`I thought you might enjoy this article:\n\n${i}\n\n${r}`,s=`mailto:?subject=${encodeURIComponent(`Check out this article: ${i}`)}&body=${encodeURIComponent(a)}`,l=document.createElement("a");l.href=s,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)}(t)),t.target.closest(".native-share")){t.preventDefault();const e=t.target.closest("article");if(!e)return;const n=e.querySelector("h2 a"),o=n?n.href:window.location.href,r=v(n?n.textContent:document.title),i={title:r,text:r,url:o};navigator.canShare&&navigator.canShare(i)||navigator.share?navigator.share(i).then((()=>console.log("Shared successfully"))).catch((e=>{"AbortError"!==e.name&&console.error("Share failed:",e)})):console.log("Web Share API not supported")}if(t.target.closest(".whatsapp-share")){t.preventDefault();const e=t.target.closest("article");if(!e)return;const n=e.querySelector("h2 a"),o=n?n.href:window.location.href,r=v(n?n.textContent:document.title);if(!f(o))return void console.error("Invalid URL detected");window.open(function(e,t){const n=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),o=`${t}\n\n${e}`;return`${n?"whatsapp://send":"https://web.whatsapp.com/send"}?text=${encodeURIComponent(o)}`}(o,r),"_blank","noopener,noreferrer")}if(t.target.closest(".mastodon-share")){if(t.preventDefault(),t.stopPropagation(),!e.checkLimit("mastodonShare",10))return void console.warn("Too many share attempts");const n=t.target.closest("article");if(!n)return;const o=n.querySelector("h2 a"),r=o?o.href:window.location.href,i=v(o?o.textContent:document.title);let a=window.prompt("Enter your Mastodon instance URL:",localStorage.getItem("mastodon-instance")||"mastodon.social");if(a){const e=a.replace(/^https?:\/\//,"").replace(/\/$/,"").replace(/[<>'"`{}()\[\]]/g,""),t=`https://${e}/share?text=${encodeURIComponent(`${i}\n\n${r}`)}`;window.open(t,"_blank","noopener,noreferrer"),localStorage.setItem("mastodon-instance",e)}}const n=t.target.closest(".dropdown-btn");if(n&&n.parentElement){const e=n.nextElementSibling;if(e&&e.classList.contains("dropdown-menu")){const t=e.classList.contains("active");e.classList.toggle("active"),n.setAttribute(o.EXPANDED,(!t).toString()),e.setAttribute(o.HIDDEN,t.toString())}}})),document.addEventListener("keydown",(e=>{const t=e.target.closest(".dropdown-btn");if(t){const o=t.nextElementSibling;switch(e.key){case n.ENTER:case n.SPACE:e.preventDefault(),t.click();break;case n.ESCAPE:o?.classList.contains("active")&&(e.preventDefault(),t.click(),t.focus())}}e.key===n.ESCAPE&&document.querySelectorAll(".dropdown-menu.active").forEach((e=>{const t=e.previousElementSibling;e.classList.remove("active"),e.setAttribute(o.HIDDEN,"true"),t&&(t.setAttribute(o.EXPANDED,"false"),t.focus())}))})),window.__articleNavigation=function(){let e=document.querySelectorAll("article");if(!e.length)return;let t=0;const n=document.createElement("div");function o(){e=document.querySelectorAll("article"),e.forEach(((e,t)=>{e.setAttribute("tabindex","-1"),e.setAttribute("data-article-index",t.toString())}))}function r(n){if(n.target.matches("input, textarea"))return;let o=t;switch(n.key.toLowerCase()){case"j":n.preventDefault(),o=Math.min(t+1,e.length-1);break;case"k":n.preventDefault(),o=Math.max(t-1,0)}if(o!==t){const n=e[o];t=o,n.scrollIntoView({behavior:"smooth",block:"start"}),n.focus();const r=n.querySelector("h2")?.textContent||"Article",i=`${o+1} of ${e.length}`,a=document.createElement("div");a.setAttribute("role","status"),a.setAttribute("aria-live","polite"),a.className="visually-hidden",a.textContent=`${r}. Article ${i}`,document.body.appendChild(a),setTimeout((()=>a.remove()),1e3)}}n.className="visually-hidden",n.setAttribute("role","status"),n.textContent="Use J and K keys to navigate between articles",document.body.appendChild(n),o(),document.addEventListener("keydown",r);const i=document.createElement("style");return i.textContent="\n        article:focus {\n            outline: 2px solid #007bff;\n            outline-offset: 8px;\n        }\n        article:focus:not(:focus-visible) {\n            outline: none;\n        }\n    ",document.head.appendChild(i),o}(),function(){const e=document.documentElement,t=document.querySelector(".burger"),r=document.querySelector(".canvas-close"),i=document.querySelector(".dimmer"),a=document.querySelector(".off-canvas");if(!(t&&r&&i&&a))return;let s,l;function c(e){["open","close"].includes(e)&&(i.style.display="open"===e?"block":"none",i.style.opacity="open"===e?"1":"0",i.setAttribute(o.HIDDEN,"close"===e?"true":"false"))}function d(){s=document.activeElement,e.classList.add("canvas-opened","canvas-visible"),t.setAttribute(o.EXPANDED,"true"),a.setAttribute(o.HIDDEN,"false"),c("open");const r=a.querySelector("a[href], button:not([disabled])");r?.focus(),l=function(e){const t=e.querySelectorAll('a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])'),o=t[0],r=t[t.length-1];function i(e){e.key===n.TAB&&(e.shiftKey&&document.activeElement===o?(e.preventDefault(),r.focus()):e.shiftKey||document.activeElement!==r||(e.preventDefault(),o.focus()))}return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)}(a)}function u(){e.classList.remove("canvas-opened"),t.setAttribute(o.EXPANDED,"false"),a.setAttribute(o.HIDDEN,"true"),c("close"),l&&l(),s&&s.focus()}t.setAttribute(o.EXPANDED,"false"),t.setAttribute(o.CONTROLS,"off-canvas-menu"),a.setAttribute("id","off-canvas-menu"),a.setAttribute(o.HIDDEN,"true"),a.setAttribute("role","dialog"),a.setAttribute(o.LABEL,"Side Menu"),t.addEventListener("click",d),r.addEventListener("click",u),i.addEventListener("click",u),document.addEventListener("keydown",(t=>{t.key===n.ESCAPE&&e.classList.contains("canvas-opened")&&u()}))}(),function(){let e;const t=()=>{e&&e.disconnect();const t=window.innerHeight,n=100;e=new IntersectionObserver((o=>{o.forEach((o=>{if(o.isIntersecting&&o.boundingClientRect.top<t+n&&o.target instanceof HTMLImageElement){const t=o.target;t.hasAttribute("alt")||t.setAttribute("alt",""),t.removeAttribute("loading"),e.unobserve(t)}}))})),document.querySelectorAll('img[loading="lazy"]').forEach((t=>{t instanceof HTMLImageElement&&e.observe(t)}))};t(),window.addEventListener("resize",g(t,250))}(),function(){const e=document.getElementById("showCommentsBtn"),t=document.getElementById("commentBlock");if(!e||!t)return;e.setAttribute(o.EXPANDED,"false"),e.setAttribute(o.CONTROLS,"commentBlock"),t.setAttribute(o.HIDDEN,"true"),e.addEventListener("click",(()=>{const n="none"!==t.style.display;t.style.display=n?"none":"block",e.setAttribute(o.EXPANDED,(!n).toString()),t.setAttribute(o.HIDDEN,n.toString());const r=document.createElement("div");r.setAttribute("role","status"),r.setAttribute("aria-live","polite"),r.className="visually-hidden",r.textContent="Comments are now "+(n?"hidden":"visible"),document.body.appendChild(r),setTimeout((()=>r.remove()),1e3)})),e.addEventListener("keydown",(t=>{t.key!==n.ENTER&&t.key!==n.SPACE||(t.preventDefault(),e.click())}))}(),function(){const e=document.querySelector(".toggle");if(!e)return;const t=document.querySelectorAll(".toggle button"),r=document.querySelectorAll("[data-yearly]"),i=document.querySelectorAll("[data-monthly]");t.forEach((a=>{a.setAttribute("role","switch"),a.setAttribute(o.CHECKED,"false"),a.addEventListener("click",(()=>{const n=a.getAttribute("data-price");if(!["yearly","monthly"].includes(n))return;t.forEach((e=>{e.classList.remove("active"),e.setAttribute(o.CHECKED,"false")})),a.classList.add("active"),a.setAttribute(o.CHECKED,"true"),e.setAttribute("data-active-price",n);const s="yearly"===n;r.forEach((e=>{e.style.display=s?"block":"none",e.setAttribute(o.HIDDEN,(!s).toString())})),i.forEach((e=>{e.style.display=s?"none":"block",e.setAttribute(o.HIDDEN,s.toString())}))})),a.addEventListener("keydown",(e=>{e.key!==n.ENTER&&e.key!==n.SPACE||(e.preventDefault(),a.click())}))}))}(),function(){const e=document.querySelector(".article-list");if(!e)return;e.setAttribute("role","feed"),e.setAttribute("aria-label","Article list");const t=new Isotope(e,{itemSelector:".post",percentPosition:!0,layoutMode:"masonry",masonry:{columnWidth:".grid-sizer",fitWidth:!0,gutter:30}});e.querySelectorAll(".post").forEach((e=>{const n=e.querySelector(".primary-tag");if(n){const t=v(n.textContent).trim().toLowerCase().replace(/[^a-z0-9-]/g,"-");e.classList.add(t)}const o=e.querySelector("img");o&&o.addEventListener("load",(()=>{t.layout()}))}));const n=y(t);window.__components={infiniteLoader:new L(t,n)},t.layout()}(),function(){function e(e,t){const n=document.createElement("aside");return n.className="sidenote",n.id=`note-${e}`,n.innerHTML=`\n            <div class="note-content">\n                <span class="note-number">${e}</span>\n                <div class="note-text">${t}</div>\n            </div>\n        `,n}function t(){const e=document.querySelector(i),t=document.querySelectorAll(`.${s} .sidenote`);window.innerWidth<=l||t.forEach(((n,o)=>{const r=n.id.replace("note-",""),i=document.getElementById(`ref-${r}`);if(i&&e){const r=i.getBoundingClientRect(),a=e.getBoundingClientRect();let s=r.top-a.top-12;if(o>0){const e=t[o-1].getBoundingClientRect(),n=12;s<e.bottom-a.top+n&&(s=e.bottom-a.top+n)}n.style.top=`${Math.round(s)}px`}}))}function n(){const e=document.querySelector(`.${s}`),t=document.querySelector(`.${c}`);e&&t&&(window.innerWidth<=l?(e.style.display="none",t.style.display="block"):(e.style.display="block",t.style.display="none"))}setTimeout((function(){console.log("Processing content");const o=document.querySelector(r);if(!o)return void console.log("No article found");const l=o.querySelector(i);if(!l)return void console.log("No content found");const d=Array.from(l.getElementsByTagName("p")),u={},h=/^\[\[(\d+)\]\]\s*(.+)$/,m=/\[\[(\d+)\]\]/g;if(d.forEach(((e,t)=>{const n=e.textContent.trim().match(h);if(n){const[t,o,r]=n;u[o]={content:r,element:e},e.style.display="none"}})),Object.keys(u).length>0){const r=document.createElement("div");r.className=s;const i=document.createElement("div");i.className=c,i.style.display="none",d.forEach((e=>{const t=e.innerHTML;t.includes("[[")&&(e.innerHTML=t.replace(m,((e,t)=>u[t]?`<sup class="footnote-ref" id="ref-${t}">${t}</sup>`:e)))})),Object.entries(u).forEach((t=>{let[n,o]=t;const a=e(n,o.content);r.appendChild(a);const s=e(n,o.content);s.classList.add("mobile"),i.appendChild(s)})),l.appendChild(r);const h=o.querySelector(a);h&&o.insertBefore(i,h),n(),t()}}),500),window.addEventListener("resize",g((()=>{n(),requestAnimationFrame(t)}),100)),document.addEventListener("click",(e=>{if(e.target.matches(".footnote-ref")){const t=e.target.id.replace("ref-","");if(document.querySelectorAll(".sidenote").forEach((e=>{e.classList.remove("highlight")})),window.innerWidth<=l){const e=document.querySelector(`.${c} #note-${t}`);e&&(e.classList.add("highlight"),e.offsetHeight,e.style.backgroundColor="#ffeb99",requestAnimationFrame((()=>{e.style.backgroundColor="#fffdf0"})),setTimeout((()=>{e.scrollIntoView({behavior:"smooth",block:"center"})}),50))}else document.querySelectorAll(`#note-${t}`).forEach((e=>{e&&e.classList.add("highlight")}))}}))}(),w(),b(),function(){const e=document.getElementById("knicks-counter");function t(){const t=new Date("1973-05-10T00:00:00-05:00"),n=new Date,o=new Date(n.toLocaleString("en-US",{timeZone:"America/New_York"}))-t,r=Math.floor(o/864e5);e.textContent=`${r.toLocaleString()} Days Ago`}e&&(t(),function(){const e=new Date,n=new Date(e.toLocaleString("en-US",{timeZone:"America/New_York"})),o=new Date(n);o.setDate(o.getDate()+1),o.setHours(0,0,0,0),setTimeout((()=>{t(),setInterval(t,864e5)}),o-n)}())}(),function(){const e={trigger:document.querySelector(`.${CSS.escape(u.triggerButtonClass)}`),panel:document.querySelector(`.${CSS.escape(u.panelClass)}`),overlay:document.querySelector(`.${CSS.escape(u.overlayClass)}`),closeBtn:document.querySelector(`.${CSS.escape(u.closeBtnClass)}`)};if(!Object.values(e).every(Boolean))return void console.error("Required elements not found for related articles panel");const t={attempts:0,lastReset:Date.now(),checkLimit(){const e=Date.now();return e-this.lastReset>u.timeWindowMs&&(this.attempts=0,this.lastReset=e),!(this.attempts>=u.maxOpenAttempts||(this.attempts++,0))}};function n(t){const{activeClass:n,panelOpenClass:o}=u;try{t?(e.panel.classList.add(n),e.overlay.classList.add(n),document.body.classList.add(o)):(e.panel.classList.remove(n),e.overlay.classList.remove(n),document.body.classList.remove(o))}catch(t){console.error("Error toggling panel classes:",t),e.panel.classList.remove(n),e.overlay.classList.remove(n),document.body.classList.remove(o)}}function o(t){try{e.trigger.setAttribute("aria-expanded",String(t)),e.panel.setAttribute("aria-hidden",String(!t)),e.overlay.setAttribute("aria-hidden",String(!t))}catch(t){console.error("Error updating ARIA attributes:",t),e.trigger.setAttribute("aria-expanded","false"),e.panel.setAttribute("aria-hidden","true"),e.overlay.setAttribute("aria-hidden","true")}}function r(){n(!1),o(!1),setTimeout((()=>e.trigger.focus()),100)}const i=new Set;function a(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=e=>{try{n(e)}catch(e){console.error(`Error in ${t} handler:`,e),r()}};e.addEventListener(t,a,o),i.add((()=>{e.removeEventListener(t,a,o)}))}a(e.trigger,"click",(function(){t.checkLimit()?(n(!0),o(!0),setTimeout((()=>e.closeBtn.focus()),100)):console.warn("Rate limit exceeded for panel opening")})),a(e.closeBtn,"click",r),a(e.overlay,"click",r),a(document,"keydown",(t=>{"Escape"===t.key&&e.panel.classList.contains(u.activeClass)&&r()})),a(e.panel,"keydown",(t=>{if("Tab"!==t.key)return;const n=Array.from(e.panel.querySelectorAll(u.focusableSelectors)).filter((e=>!e.hasAttribute("disabled")&&"-1"!==e.getAttribute("tabindex")&&null!==e.offsetParent));if(0===n.length)return;const o=n[0],r=n[n.length-1],i=document.activeElement===o,a=document.activeElement===r;t.shiftKey&&i?(t.preventDefault(),r.focus()):!t.shiftKey&&a&&(t.preventDefault(),o.focus())}))}(),document.querySelectorAll(".article-stack").forEach((e=>{const t=e.querySelectorAll(".panel-article-card");t.forEach(((n,o)=>{0===o&&(n.style.zIndex="3"),1===o&&(n.style.zIndex="2"),2===o&&(n.style.zIndex="1"),n.addEventListener("click",(()=>{if(0!==Array.from(t).indexOf(n)){const t=e.querySelector(".panel-article-card:first-child"),o=n.style.zIndex;n.style.zIndex=t.style.zIndex,t.style.zIndex=o}}))}))})),function(){const e=document.querySelector(".filter-btns"),t=document.querySelector(".scroll-left"),n=document.querySelector(".scroll-right");if(!e||!t||!n)return;let o,r,i=!1;function a(t){i=!0,e.style.cursor="grabbing",e.style.userSelect="none",o=(t.pageX||t.touches[0].pageX)-e.offsetLeft,r=e.scrollLeft}function s(){i=!1,e.style.cursor="grab",e.style.removeProperty("user-select")}function l(t){if(!i)return;t.preventDefault();const n=2*((t.pageX||t.touches[0].pageX)-e.offsetLeft-o);e.scrollLeft=r-n}function c(){const{scrollLeft:o,scrollWidth:r,clientWidth:i}=e;t.classList.toggle("visible",o>0),n.classList.toggle("visible",o<r-i-1)}function d(t){e.scrollBy({left:"left"===t?-200:200,behavior:"smooth"})}e.addEventListener("mousedown",a),e.addEventListener("mouseleave",s),e.addEventListener("mouseup",s),e.addEventListener("mousemove",l),e.addEventListener("touchstart",a),e.addEventListener("touchend",s),e.addEventListener("touchmove",l),c(),e.addEventListener("scroll",c),window.addEventListener("resize",c),t.addEventListener("click",(()=>d("left"))),n.addEventListener("click",(()=>d("right")))}(),E(),new k,function(){const e=document.querySelector(".site-header");if(!e)return;const t=10;let n=!1;function o(){const o=window.scrollY>t;e.classList.toggle("scrolled",o),n=!1}window.addEventListener("scroll",(function(){n||(requestAnimationFrame((()=>{o()})),n=!0)}),{passive:!0}),o()}();const t=document.querySelectorAll(".native-share"),d=document.querySelectorAll(".share-separator");navigator.share&&(t.forEach((e=>e.style.display="block")),d.forEach((e=>e.style.display="block")),t.forEach((t=>{t.addEventListener("click",(async t=>{if(t.preventDefault(),!e.checkLimit("shareAction",10))return void console.warn("Too many share attempts");const n=t.target.closest("article");if(!n)return;const o=n.querySelector("h2 a"),r=o?o.href:window.location.href,i=v(o?o.textContent:document.title);if(f(r))try{await navigator.share({title:i,text:i,url:r})}catch(e){"AbortError"!==e.name&&console.error("Share failed:",e)}else console.error("Invalid URL detected")}))})))}));class L{constructor(e,t){this._iso=e,this._handleFilterSelect=t,this._nextDom=document,this._loader=document.getElementById("read-more-trigger"),this._postList=document.querySelector(".article-list"),this._loadingFlag=!1,this._currentFilter="all",this._loadedPages=1,this._maxRetries=3,this._retryDelay=1e3,this._isLocalhost="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,this._updateArticleNavigation=null,this._cachedPosts=new Map,this._hasMoreFilteredPosts=!0,this._initializeAccessibility(),this._subscribeToLoadMore()}_initializeAccessibility(){this._loader&&(this._loader.setAttribute("role","button"),this._loader.setAttribute("aria-label","Load more posts"),this._loader.hasAttribute("tabindex")||this._loader.setAttribute("tabindex","0")),this._updateArticleNavigation=window.__articleNavigation}_subscribeToLoadMore(){if(!this._loader)return;const e=async()=>{if(!this._loadingFlag){this._loadingFlag=!0,this._updateLoaderState(!0);try{const e=localStorage.getItem("selectedPostType")||"all",t=await this.loadNextPage();t&&t.length>0?await this._processNewPosts(t,e):this._showNoMorePosts()}catch(t){console.error("Error loading more posts:",t),this._announceError(),this._isLocalhost&&(console.log("Retrying in development mode..."),setTimeout((()=>{this._loadingFlag=!1,e()}),this._retryDelay))}finally{this._loader.classList.contains("disabled")||this._updateLoaderState(!1)}}};this._loader.addEventListener("click",e),this._loader.addEventListener("keydown",(t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e())}))}async loadNextPage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=this._nextDom.querySelector('link[rel="next"]'),n=localStorage.getItem("selectedPostType")||"all";if(!t?.href||this._loadedPages>1&&"all"!==n&&!this._hasMoreFilteredPosts)return this._showNoMorePosts(),null;try{const e=new URL(t.href);this._isLocalhost&&e.searchParams.set("t",Date.now());const n=await fetch(e.toString(),{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},cache:this._isLocalhost?"no-store":"default"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const o=await n.text(),r=(new DOMParser).parseFromString(o,"text/html"),i=r.querySelectorAll(".post");return i.length?(this._nextDom=r,this._loadedPages++,Array.from(i)):(this._showNoMorePosts(),null)}catch(t){if(console.error("Error in loadNextPage:",t),e<this._maxRetries)return console.log(`Retrying... Attempt ${e+1} of ${this._maxRetries}`),await new Promise((t=>setTimeout(t,this._retryDelay*(e+1)))),this.loadNextPage(e+1);throw t}}async _processNewPosts(e,t){if(!e||0===e.length)return void this._showNoMorePosts();if("all"!==t){if(0===e.filter((e=>{const n=e.querySelector(".primary-tag");return n&&this._sanitizeTagName(n.textContent)===t})).length)return void this._showNoMorePosts()}const n=e.map((e=>{const t=this._processPost(e);return this._postList.appendChild(t),t}));if(this._iso.appended(n),"all"!==t){this._iso.arrange({filter:`.${t}`});if(0===n.filter((e=>e.classList.contains(t))).length)return this._hasMoreFilteredPosts=!1,void this._showNoMorePosts()}this._iso.layout(),this._updateArticleNavigation&&this._updateArticleNavigation(),this._cachedPosts.set(this._loadedPages,n),this._announceNewContent(n.length)}_processPost(e){const t=e.querySelector(".primary-tag");if(t){const n=this._sanitizeTagName(t.textContent);e.classList.add(n)}return e}_updateLoaderState(e){this._loader&&(this._loadingFlag=e,this._loader.classList.toggle("loading",e),this._loader.textContent=e?"Loading...":"Load More",this._loader.setAttribute("aria-label",e?"Loading more posts, please wait":"Load more posts"))}_showNoMorePosts(){this._loader&&(this._loader.textContent="No more posts",this._loader.classList.add("disabled"),this._loader.setAttribute("aria-disabled","true"),this._loader.style.cursor="default",this._announceNewContent("No more posts available"))}_announceNewContent(e){const t=document.createElement("div");t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.className="visually-hidden",t.textContent="number"==typeof e?`${e} new posts loaded`:e,document.body.appendChild(t),setTimeout((()=>t.remove()),1e3)}_announceError(){const e=document.createElement("div");e.setAttribute("role","alert"),e.className="visually-hidden",e.textContent="Error loading more posts. Retrying...",document.body.appendChild(e),setTimeout((()=>e.remove()),1e3)}_sanitizeTagName(e){return e.trim().toLowerCase().replace(/[^a-z0-9-]/g,"-")}}}();
//# sourceMappingURL=index.js.map
